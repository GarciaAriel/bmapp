<div id="cal-day-box">
	<div class="row-fluid clearfix cal-row-head">
		<div class="span1 col-xs-4 cal-cell"> <%= cal.locale.time %></div>
		<div class="span11 col-xs-8 cal-cell"><%= cal.locale.events %></div>
	</div>
	<% if(all_day.length) {%>
		<div class="row-fluid clearfix cal-day-hour">
			<div class="span1 col-xs-1"><b><%= cal.locale.all_day %></b></div>
			<div class="span11 col-xs-11">
				<% _.each(all_day, function(event){ %>
					<div class="day-highlight dh-<%= event.class %>">
						<a href="<%= event.url ? event.url : 'javascript:void(0)' %>" data-event-id="<%= event.id %>"
						   data-event-class="<%= event['class'] %>" class="event-item">
							<%= event.title %></a>
					</div>
				<% }); %>
			</div>
		</div>
	<% }; %>
	<% if(before_time.length) {%>
		<div class="row-fluid clearfix cal-day-hour">
			<div class="span1 col-xs-3"><b><%= cal.locale.before_time %></b></div>
			<div class="span5 col-xs-5">
				<% _.each(before_time, function(event){ %>
					<div class="day-highlight dh-<%= event.class %>">
						<span class="cal-hours pull-right"><%= event.end_hour %></span>
						<a href="<%= event.url ? event.url : 'javascript:void(0)' %>" data-event-id="<%= event.id %>"
						   data-event-class="<%= event['class'] %>" class="event-item">
							<%= event.title %></a>
					</div>
				<% }); %>
			</div>
		</div>
	<% }; %>
	<div id="cal-day-panel" class="clearfix">				

		<% arr = [];%>
		<% for(i = 0; i < by_hour.length; i++){ %>
			<!-- pull-left -->			

			<% event = by_hour[i]; %>

			<% same_hour = false;%>
			<% if(arr.length == 0) {%>
					<% arr.push(event.start_hour);%>
			<% }else{ %>
				<% for(j = 0; j < arr.length; j++){ %>
					<% if(arr[j]== event.start_hour ){%>
						<% same_hour = true;%>
					<% }; %>
				<% }; %>
			<% }; %>


			<% firstt = 0; %>
			<% if(i > 0) {%>
				<% firstt = (by_hour[i-1]).top; %>
			<% }; %>

			<% secondd = 0; %>
			<% if(i > 0) {%>
				<% secondd = (by_hour[i-1]).lines; %>
			<% }; %>
			
			<% if(same_hour){ %>
				<div class=" day-event day-highlight dh-<%= event.class %>" style="clear: both; float: left; display: block; position: relative; margin-top: <%= (event.top * 30)-(firstt*30)-(secondd * 30) %>px; height: <%= (event.lines * 30) %>px;left: 136px;bottom: 2px;">				
			<% }else{ %>
				<div class=" day-event day-highlight dh-<%= event.class %>" style="clear: both; float: left; display: block; position: relative; margin-top: <%= (event.top * 30)-(firstt*30)-(secondd * 30) %>px; height: <%= (event.lines * 30) %>px;">					
			<% }; %>
					<!-- <span class="cal-hours"><%= event.start_hour %> - <%= event.end_hour %></span> -->					
					<a href="<%= event.url ? event.url : 'javascript:void(0)' %>" data-event-id="<%= event.id %>"
					   data-event-class="<%= event['class'] %>" class="event-item">
						<%= event.title %></a>
			</div>
		<% }; %>	
		
		<div id="cal-day-panel-hour">
			<% for(i = 0; i < hours; i++){ %>
				<div class="cal-day-hour">
					<% for(l = 0; l < cal._hour_min(i); l++){ %>
						<div class="row-fluid cal-day-hour-part">
							<div class="span1 col-xs-4"><b><%= cal._hour(i, l) %></b></div>
							<div class="span11 col-xs-8"></div>
						</div>
				<% }; %>
				</div>
			<% }; %>
		</div>
	</div>
	<% if(after_time.length) {%>
	<div class="row-fluid clearfix cal-day-hour">
		<div class="span1 col-xs-3"><b><%= cal.locale.after_time %></b></div>
		<div class="span11 col-xs-9">
			<% _.each(after_time, function(event){ %>
			<div class="day-highlight dh-<%= event.class %>">
				<span class="cal-hours"><%= event.start_hour %></span>
				<a href="<%= event.url ? event.url : 'javascript:void(0)' %>" data-event-id="<%= event.id %>"
				   data-event-class="<%= event['class'] %>" class="event-item">
					<%= event.title %></a>
			</div>
			<% }); %>
		</div>
	</div>
	<% }; %>
</div>
